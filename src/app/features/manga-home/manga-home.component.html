<div class="manga-home-root">
  <div class="tabs-row">
    <div class="tabs-scroll">
      <ng-container *ngFor="let t of visibleTabs">
        <div class="explorer-tab" [class.active]="selectedChapter?.id === t.id">
          <button class="tab-btn" (click)="selectTab(t)">{{ t.title }}</button>
          <button class="tab-close" (click)="closeTab(t)">✕</button>
        </div>
      </ng-container>
    </div>
  </div>

  <div class="controls">
    <label>Tabs to show:
      <select (change)="changePageSize($any($event.target).value)" [value]="pageSize">
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="20">20</option>
      </select>
    </label>
    <label class="upload">
      <input type="file" (change)="onFiles($event)" multiple />
      <span>Import Mangas</span>
    </label>
  </div>

  <div class="grid">
    <div *ngFor="let ch of chapters" class="card" (click)="openChapterInTab(ch)">
      <div class="cover" [style.backgroundImage]="'url(' + ch.pages[0] + ')'">
        <div class="cover-overlay">
          <div class="title">{{ ch.title }}</div>
        </div>
      </div>
      <div class="meta">
        <div class="meta-actions">Read →</div>
      </div>
    </div>
  </div>

  <div class="reader-preview" *ngIf="selectedChapter">
    <h3>Preview: {{selectedChapter.title}}</h3>
    <div class="preview-pages">
      <img *ngFor="let p of selectedChapter.pages" [src]="p" />
    </div>
  </div>
</div>
